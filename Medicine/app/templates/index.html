{% extends "base.html" %}
{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}
{% block content %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="r{{ url_for('static', filename='style.css') }}">
    <link href="static/calendar/vanilla-calendar.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@3.0.9/dist/css/splide.min.css">

    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@3.0.9/dist/js/splide.min.js"></script>
    <script src="static/calendar/vanilla-calendar.min.js" defer></script>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="{{ url_for('static', filename='scripts/changeChatIconOnScroll.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/calendarInit.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/getCalendarValue.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/sliderSettings.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/chat.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/availableAppointments.js') }}"></script>
    <script src="{{ url_for('static', filename='scripts/createAppointment.js') }}"></script>

   <!-- <script>
        window.addEventListener('scroll', function () {
            var gptIcon = document.getElementById('gptIcon');
            var scrollPosition = window.scrollY;

            if (scrollPosition > 70) {
                gptIcon.classList.remove('white');
            } else {
                gptIcon.classList.add('white');
            }
        });
    </script> -->
    <!-- <script>
        document.addEventListener("DOMContentLoaded", function() {
            const calendar = new VanillaCalendar('#calendar');
            calendar.init();
            document.getElementById("specialtySelection").classList.add("hidden");
        });
    </script> -->
    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
            document.addEventListener('click', function(event) {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –±—ã–ª–∞ –ª–∏ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ —Å –∫–ª–∞—Å—Å–æ–º vanilla-calendar-day__btn
                if (event.target.classList.contains('vanilla-calendar-day__btn')) {
                    // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ data-calendar-day
                    var selectedDate = event.target.getAttribute('data-calendar-day');

                        // –í—ã–≤–æ–¥–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å
                        // console.log("–í—ã–±—Ä–∞–Ω–Ω–∞—è –¥–∞—Ç–∞:", selectedDate);

                        // –î–∞–ª–µ–µ, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ selectedDate –∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –≤ –Ω—É–∂–Ω–æ–µ –º–µ—Å—Ç–æ –≤ —Ñ–æ—Ä–º–µ
                        // –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ –ø–æ–ª–µ —Å –∏–º–µ–Ω–µ–º "date":
                    document.querySelector('input[name="date"]').value = selectedDate;
                    goBack();
                    document.getElementById("specialtySelection").classList.remove("hidden");
                }
            });
        });
    </script> -->
    <!-- <script>
        document.addEventListener('DOMContentLoaded', function () {
        new Splide('#splide-container', {
            type       : 'carousel',
            perPage    : 1,
            pagination : false,
            focus      : 'center',
            breakpoints: {
            600: {
                perPage: 1,
            },
            800: {
                perPage: 1,
            },
            },
            drag: false,
        }).mount();
        });
    </script> -->



    <title>Index</title>
</head>
<body class="container">
    <div class="container padding100pxW" id="indexPage">
        <div class="container row spacebtw marginTop20px" id="indexPageHeader">
            <div class="container row small" id="headerLogo">
                <img src="static/images/logo.svg" width="40px" class="marginW30px">
                <a href="/index"  class="link"><h4 class="thin">Logoipsum</h4></a>
            </div>

            {% if current_user.is_authenticated %}
                {% if current_user.patient %}
                    <a href="/medical_card" class="link"><h4 class="thin">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞</h4></a>
                    <a href="#" class="link"><h4 class="thin">–ó–∞–ø–∏—Å–∏</h4></a>
                {% endif %}
            {% endif %}

            <a href="#" class="link"><h4 class="thin">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã</h4></a>
            
            {% if current_user.is_authenticated %}
                {% if name and surname %}
                    <a href="/menu">
                        <div class="profile">
                            <div class="profileName">
                                <h5>{{ name }}</h5>
                                <h5>{{ surname }}</h5>
                            </div>
                                <!-- {% if current_user.patient.photo_path%}
                                    <img src="{{ url_for('uploaded_file', filename=current_user.patient.photo_path) }}">
                                {% else %}
                                    <img src="static/images/profileLogo.svg" width="40px" class="logo white">
                                {% endif %}

                                {% if current_user.doctor.photo_path%}
                                    <img src="{{ url_for('uploaded_file', filename=current_user.doctor.photo_path) }}">
                                {% else %}
                                    <img src="static/images/profileLogo.svg" width="40px" class="logo white">
                                {% endif %} -->
                                <img src="static/images/profileLogo.svg" width="40px" class="logo white">
                        </div>
                    </a>
                {% endif %}
                
            {% else %}
            <a href="/login" class="link"><h4 class="thin">–í–æ–π—Ç–∏</h4></a>
            
            {% endif %}

</div>
        <div class="container fullHeight centerH flex-end padding100pxW" id="diagnosticsButtonDiv">
            <a class="diagnosticsButton">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</a>
        </div>
    </div>
    <div class="container padding100pxW indexDoctors">
        <h3 class="regular marginTop40px" style="text-decoration: underline;">–ù–∞—à–∏ –≤—Ä–∞—á–∏</h3>

        <div class="container slider marginTop80px row center">
            <div class="splide" id="splide-container">
                <div class="splide__track">
                    <ul class="splide__list">
                        <li class="splide__slide">
                            <div class="container small centerItemsW marginRight70px" id="doctorCard">
                                <img src="static/images/doctorCardPhoto.jpg" id="doctorCardPhoto">
                                <div class="container medium faded"  id="doctorCardData">
                                    <h5 class="aboutDoctor thin" id="doctorPosition">–ù–∞—Ä–∫–æ–ª–æ–≥</h5>
                                    <h4 class="aboutDoctor" id="doctorName">–û–ª–µ–≥</h4>
                                    <h4 class="aboutDoctor" id="doctorSurname">–û–ª–µ–≥–æ–≤</h4>
                                    <h5 class="aboutDoctor thin" id="doctorScientificDegree">–ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞—É–∫</h5>
                                </div>
                            </div>
                        </li>
                        <li class="splide__slide">
                            <div class="container small centerItemsW marginRight70px" id="doctorCard">
                                <img src="static/images/doctorCardPhoto.jpg" id="doctorCardPhoto">
                                <div class="container medium faded"  id="doctorCardData">
                                    <h5 class="aboutDoctor thin" id="doctorPosition">–ù–∞—Ä–∫–æ–ª–æ–≥</h5>
                                    <h4 class="aboutDoctor" id="doctorName">–û–ª–µ–≥</h4>
                                    <h4 class="aboutDoctor" id="doctorSurname">–û–ª–µ–≥–æ–≤</h4>
                                    <h5 class="aboutDoctor thin" id="doctorScientificDegree">–ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞—É–∫</h5>
                                </div>
                            </div>
                        </li>
                        <li class="splide__slide">
                            <div class="container small centerItemsW marginRight70px" id="doctorCard">
                                <img src="static/images/doctorCardPhoto.jpg" id="doctorCardPhoto">
                                <div class="container medium faded"  id="doctorCardData">
                                    <h5 class="aboutDoctor thin" id="doctorPosition">–ù–∞—Ä–∫–æ–ª–æ–≥</h5>
                                    <h4 class="aboutDoctor" id="doctorName">–û–ª–µ–≥</h4>
                                    <h4 class="aboutDoctor" id="doctorSurname">–û–ª–µ–≥–æ–≤</h4>
                                    <h5 class="aboutDoctor thin" id="doctorScientificDegree">–ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞—É–∫</h5>
                                </div>
                            </div>
                        </li>
                        <li class="splide__slide">
                            <div class="container small centerItemsW marginRight70px" id="doctorCard">
                                <img src="static/images/doctorCardPhoto.jpg" id="doctorCardPhoto">
                                <div class="container medium faded"  id="doctorCardData">
                                    <h5 class="aboutDoctor thin" id="doctorPosition">–ù–∞—Ä–∫–æ–ª–æ–≥</h5>
                                    <h4 class="aboutDoctor" id="doctorName">–û–ª–µ–≥</h4>
                                    <h4 class="aboutDoctor" id="doctorSurname">–û–ª–µ–≥–æ–≤</h4>
                                    <h5 class="aboutDoctor thin" id="doctorScientificDegree">–ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞—É–∫</h5>
                                </div>
                            </div>
                        </li>
                        <li class="splide__slide">
                            <div class="container small centerItemsW marginRight70px" id="doctorCard">
                                <img src="static/images/doctorCardPhoto.jpg" id="doctorCardPhoto">
                                <div class="container medium faded"  id="doctorCardData">
                                    <h5 class="aboutDoctor thin" id="doctorPosition">–ù–∞—Ä–∫–æ–ª–æ–≥</h5>
                                    <h4 class="aboutDoctor" id="doctorName">–û–ª–µ–≥</h4>
                                    <h4 class="aboutDoctor" id="doctorSurname">–û–ª–µ–≥–æ–≤</h4>
                                    <h5 class="aboutDoctor thin" id="doctorScientificDegree">–ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞—É–∫</h5>
                                </div>
                            </div>
                        </li>
                                                <li class="splide__slide">
                            <div class="container small centerItemsW marginRight70px" id="doctorCard">
                                <img src="static/images/doctorCardPhoto.jpg" id="doctorCardPhoto">
                                <div class="container medium faded"  id="doctorCardData">
                                    <h5 class="aboutDoctor thin" id="doctorPosition">–ù–∞—Ä–∫–æ–ª–æ–≥</h5>
                                    <h4 class="aboutDoctor" id="doctorName">–û–ª–µ–≥</h4>
                                    <h4 class="aboutDoctor" id="doctorSurname">–û–ª–µ–≥–æ–≤</h4>
                                    <h5 class="aboutDoctor thin" id="doctorScientificDegree">–ö–∞–Ω–¥–∏–¥–∞—Ç –Ω–∞—É–∫</h5>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container center" id="allDoctorsDiv">
            <a class="button" id="allDoctorsBtn">–í—Å–µ –≤—Ä–∞—á–∏</a>
        </div>
    </div>



    <div class="container big calendarDiv marginTop40px">
        <div id="calendar"></div>
        <div id="createAppointmenDiv" action="/createAppointment" method="POST" class="container small">
            <div class="container row" id="apointementHeader">
                <img src="../static/images/backBtn.png" class="logo white hidden" onclick="goBack()" id="goBackBtn">
                <h2 class="container center white">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</h2>
            </div>

            <!-- –í—ã–±–æ—Ä –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤—Ä–∞—á–∞ -->
            <div class="container center column spacebtw" id="specialtySelection">
                <h4 class="white">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–∞—á–∞</h4>
                <div id="specialtySelectionSelector">
                    <!--
                    <button class="button" type="button" onclick="selectSpecialty('narcology')">–ù–∞—Ä–∫–æ–ª–æ–≥</button>
                    <button class="button" type="button" onclick="selectSpecialty('urologist')">–£—Ä–æ–ª–æ–≥</button>
                    <button class="button" type="button" onclick="selectSpecialty('protologist')">–ü—Ä–æ–∫—Ç–æ–ª–æ–≥</button>
                    -->

                </div>
            </div>

            <!-- –°–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é -->
            <div class="container hidden" id="doctorList">
                <h4 class="white">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–∞—á–∞</h4>
                <div id="doctorLinks" class="container">
                    <!-- –°—Å—ã–ª–∫–∏ –Ω–∞ –≤—Ä–∞—á–µ–π –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é JavaScript -->
                </div>
            </div>

            <form id="createAppointment" action="/createAppointment" method="POST">
                <input type="text" name="date" class="hidden" required="required" onchange="goBack()">
                <div class="container row hidden" id="doctorDetails">
                    <div id="appointementDoctorPhotoApp">
                        <img src="../static/images/doctorCardPhoto.jpg">
                    </div>
                    <div>
                        <h4 class="appointementDoctorData white thin" id="doctorFirstnameAppointement">–ò–º—è</h4>
                        <h4 class="appointementDoctorData white thin" id="doctorSurnameAppointement">–§–∞–º–∏–ª–∏—è</h4>
                    </div>

                    <!-- –í—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
                    <div class="container createAppointmentTimePickerContainer hidden" id="timePickerContainer">
                        <style>
                            .createAppointmentTimePicker option[value=""] {
                                display: none;
                            }
                        </style>

                        <select class="createAppointmentTimePicker" id="appt" name="appt" required onchange="addIcon()">
                            <!-- –î–æ–±–∞–≤–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
                            <option value="" disabled selected>üïë --:--</option>
                            <!-- –í—Å—Ç–∞–≤—å—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤—Ä–µ–º–µ–Ω–∏ —Å —É—á–µ—Ç–æ–º 15-–º–∏–Ω—É—Ç–Ω–æ–≥–æ —à–∞–≥–∞ -->
                            <option value="09:00">09:00</option>
                            <option value="09:15" disabled>09:15 (–∑–∞–Ω—è—Ç–æ)</option>
                            <option value="09:30">09:30</option>
                            <option value="09:45">09:45</option>
                            <!-- ... (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏) ... -->
                            <option value="18:00">18:00</option>
                        </select>
                    </div>

                    <!-- –î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–∏ -->
                </div>
                <textarea class="hidden" name="appointment_details" placeholder="–î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–∏" id="appointementTextArea"></textarea>
                <button type="submit" class="button hidden" id="submitAppointment">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è</button>
            </form>
        </div>
    </div>



    <div class="chat-container">
        <button class="fixedButton"><img src="static/images/chat.png" id="gptIcon" class="gptIcon logo white" height="40px"></button>
        <div class="chat">
            <div class="chat-title">
                <figure class="avatar">
                    <img src="static/images/chatAvatar.jpg" />
                </figure>
                <div>
                    <h1>Medical Assistant</h1>
                    <h2>AI chat</h2>
                </div>
                <button class="fixedButton" id="closeChatBtn" class="closeChatBtnImg"><img src="static/images/close.svg" class="logo white"></button>
            </div>
            <div class="messages">
                <div class="messages-content"></div>
            </div>
            <div class="message-box">
                <textarea type="text" name="chat_input" class="message-input" placeholder="Type message..." style="overflow: hidden;"></textarea>
                <button type="submit" name="chat_send" class="message-submit"><img src="static/images/chatSendMessagePhoto.png"></button>
            </div>
        </div>
    </div>

    <!-- <script>
            $(document).ready(function() {
                $('#gptIcon').on('click', function() {
                    $('.chat').css('display', 'flex');
                    $('#gptIcon').css('display', 'none');
                });

                $('#closeChatBtn').on('click', function() {
                    $('.chat').css('display', 'none');
                    $('#gptIcon').css('display', 'block');
                });
            });

        var $messages = $('.messages-content'),
            i = 0;

        function setDate() {
            var d = new Date();
            $('<div class="timestamp">' + d.getHours() + ':' + d.getMinutes() + '</div>').appendTo($('.message:last'));
        }

        function insertMessage(msg) {
            if ($.trim(msg) == '') {
                return false;
            }
            $('<div class="message message-personal">' + msg + '</div>').appendTo($messages).addClass('new');
            setDate();
            $('.message-input').val(null);
            scrollChat(); // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
            setTimeout(function() {
                fakeMessage();
            }, 1000 + (Math.random() * 20) * 20);
        }

        $('.message-submit').click(function() {
            insertMessage($('.message-input').val());
        });

        $(window).on('keydown', function(e) {
            if (e.which == 13) {
                insertMessage($('.message-input').val());
                return false;
            }
        });

        var Fake = [
            'Hi there, I\'m AI Chat and you?',
            'Nice to meet you',
            'How are you?',
            'It\'s an example of an answer. I can\'t understand you',
            'Still can\'t',
            ':)'
        ];

        function fakeMessage() {
            if ($('.message-input').val() !== '') {
                return false;
            }
            $('<div class="message new">' + Fake[i] + '</div>').appendTo($messages).addClass('new');
            setDate();
            i++;
            scrollChat(); // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Å–æ–æ–±—â–µ–Ω–∏–∏
        }

        function scrollChat() {
            var height = $messages[0].scrollHeight;
            $messages.stop().animate({ scrollTop: height }, 'slow');
        }

        // Initial fake message
        $(window).on('load', function() {
            setTimeout(function() {
                fakeMessage();
                scrollChat();
            }, 100);
        });
    </script> -->

    <!-- <script>
        document.addEventListener("DOMContentLoaded", function() {
            // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç XMLHttpRequest
            var xhr = new XMLHttpRequest();

            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å GET –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É URL-–∞–¥—Ä–µ—Å—É
            xhr.open("GET", "/practice_profiles", true);

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
            xhr.send();

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è "load" –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
            xhr.onload = function() {
                // –ü–∞—Ä—Å–∏–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
                var specialties = JSON.parse(xhr.responseText);

                // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç specialtySelectionSelector
                var specialtySelection = document.getElementById("specialtySelectionSelector");

                // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –∫–∞–∂–¥—É—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –∏ —Å–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –Ω–µ–µ
                specialties.practice_profiles.forEach(function(specialty) {
                    var button = document.createElement("button");
                    button.classList.add("button");
                    button.setAttribute("type", "button");
                    button.setAttribute("onclick", "selectSpecialty('" + specialty + "')");
                    button.textContent = specialty;
                    specialtySelection.appendChild(button);
                });
            };
        });
    </script> -->

    <!-- <script>
        function selectSpecialty(specialty) {
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º AJAX-–∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤—Ä–∞—á–µ–π –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é
            var xhr = new XMLHttpRequest();
            xhr.open("GET", "/doctors?specialty=" + specialty, true);
            xhr.send();

            xhr.onload = function() {
                if (xhr.status === 200) {
                    var doctors = JSON.parse(xhr.responseText);

                    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π
                    var doctorLinks = $("#doctorLinks");
                    doctorLinks.empty();

                    doctors.forEach(function (doctor) {
                        var doctorLink = $("<a>", {
                            id: specialty, // Use the specialty as the ID
                            class: "marginTop20px",
                            click: function () {
                                showDoctorDetails(doctor);
                            }
                        });

                        // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º, –∏–º–µ–Ω–µ–º –∏ —Ñ–∞–º–∏–ª–∏–µ–π
                        var container = $("<div>", {
                            class: "container row"
                        });

                        container.append($("<img>", {
                            src: "/uploads/" + doctor.photo_path,
                            id: "appointementDoctorPhoto"
                        }));

                        var detailsContainer = $("<div>");
                        detailsContainer.append($("<h4>", {
                            class: "appointementDoctorData white thin",
                            id: "doctorName",
                            text: doctor.firstname
                        }));
                        detailsContainer.append($("<h4>", {
                            class: "appointementDoctorData white thin",
                            id: "doctorSurname",
                            text: doctor.surname
                        }));

                        container.append(detailsContainer);
                        doctorLink.append(container);
                        doctorLinks.append(doctorLink);
                    });

                    // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–æ–≤
                    $("#specialtySelection").addClass("hidden");
                    $("#doctorList").removeClass("hidden");
                    $("#goBackBtn").removeClass("hidden");
                } else {
                    console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –≤—Ä–∞—á–µ–π");
                }
            };
        }

        function showDoctorDetails(doctor) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–∞—á–µ
            document.getElementById("doctorDetails").classList.remove("hidden");
            document.getElementById("doctorFirstnameAppointement").textContent = doctor.firstname;
            document.getElementById("doctorSurnameAppointement").textContent = doctor.surname;
            console.log(doctor.photo_path);
            
            // –°–æ–∑–¥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            var img = document.createElement("img");
            img.src = "/uploads/" + doctor.photo_path;
            img.id = "appointementDoctorPhoto";

            // –û—á–∏—â–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            document.getElementById("appointementDoctorPhotoApp").innerHTML = '';
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
            document.getElementById("appointementDoctorPhotoApp").appendChild(img);

            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –≤—Ä–∞—á–∞

            // –°–∫—Ä—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π
            document.getElementById("doctorList").classList.add("hidden");
            document.getElementById("timePickerContainer").classList.remove("hidden");
            document.getElementById("appointementTextArea").classList.remove("hidden");
            document.getElementById("submitAppointment").classList.remove("hidden");
            document.getElementById("goBackBtn").classList.remove("hidden");

            document.getElementById("appointementTextArea").value = "";
            var form = document.getElementById('createAppointment');
            var dateInput = form.querySelector('input[name="date"]');
            console.log(form);
            console.log(dateInput);
            console.log(dateInput.value);

            // –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–Ω—è—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
            fetch('/appointments/get_doctor_time?doctor_id=' + doctor.id + '&date=' + dateInput.value)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    console.log(data);

                    // –ü–æ–ª—É—á–∞–µ–º —Å—Å—ã–ª–∫—É –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç <select> –ø–æ –µ–≥–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É
                    var selectElement = document.getElementById('appt');
                    selectElement.innerHTML = '';
                    selectElement.disabled = true;

                    // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è—Ö
                    var appointmentsData = data;

                    var doctorId = document.createElement('input');
                    doctorId.classList.add("hidden");
                    doctorId.name = 'doctor_id'
                    doctorId.value = doctor.id;
                    form.appendChild(doctorId);
                    
                    // –ò–∑–≤–ª–µ–∫–∞–µ–º –∏–∑ –¥–∞–Ω–Ω—ã—Ö –≤—Ä–µ–º—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ <select>
                    appointmentsData.appointments.forEach(function(appointment) {
                        var appointmentDateTime = new Date(appointment.appointment_date_time);
                        var appointmentTime = appointmentDateTime.getUTCHours().toString().padStart(2, '0') + ':' + appointmentDateTime.getUTCMinutes().toString().padStart(2, '0');
                        selectElement.disabled = false;
                        // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç <option>
                        var optionElement = document.createElement('option');
                        optionElement.value = appointmentTime + ':00';
                        console.log(optionElement.value);
                        optionElement.textContent = appointmentTime;
                        // optionElement.disabled = true; // –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —ç—Ç–æ –≤—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ
                        // –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç <option> –≤ <select>
                        selectElement.appendChild(optionElement);
                    });
                    // –í–æ–∑–º–æ–∂–Ω–æ, –∑–¥–µ—Å—å –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–ª—É—á–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –≤—Ä–µ–º–µ–Ω–∏
                })
                .catch(error => {
                    console.error('There has been a problem with your fetch operation:', error);
                });
        }

        function goBack() {
            // –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –≤—ã–±–æ—Ä—É –≤—Ä–∞—á–∞ –∏–ª–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏
            // –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä—ã–≤–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –≤—Ä–∞—á–∞
            $("#specialtySelection").removeClass("hidden");
            $("#doctorDetails").addClass("hidden");
            $("#doctorList").addClass("hidden");
            $("#timePickerContainer").addClass("hidden");
            $("#submitAppointment").addClass("hidden");
            $("#appointementTextArea").addClass("hidden");
            $("#goBackBtn").addClass("hidden");
        }
    </script> -->

    <!-- <script>
        document.getElementById("createAppointment").addEventListener("submit", function(event){
            event.preventDefault(); // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º—ã
        
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
            var formData = new FormData(this);
            fetch('/createAppointment', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                if (response.ok) {
                    alert('–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ –ø—Ä–∏–µ–º!'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
                    goBack();
                } else if (response.status === 401) {
                    // –ï—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω —Å—Ç–∞—Ç—É—Å 401, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
                    window.location.href = '/login';
                } else {
                    response.text().then(errorMessage => {
                        alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–∏–µ–º: ' + errorMessage); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
                    });
                }
            })
            .catch(error => {
                console.error('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞:', error);
            });
        });
    </script> -->


            
     <!-- <script>
        // –ü—Ä–∏–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ —Å –∑–∞–Ω—è—Ç—ã–º–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏
        var busyTimes = ["09:15", "10:30", "14:45"];
    
        // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç select
        var select = document.getElementById('appt');
    
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è change
        select.addEventListener('change', function () {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—ã–±—Ä–∞–Ω–æ –ª–∏ –∑–∞–Ω—è—Ç–æ–µ –≤—Ä–µ–º—è
            if (busyTimes.includes(select.value)) {
                alert('–≠—Ç–æ –≤—Ä–µ–º—è —É–∂–µ –∑–∞–Ω—è—Ç–æ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–µ –≤—Ä–µ–º—è.');
                select.value = ''; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
            }
        });
    </script> -->
</body>
<footer class="container medium center marginTop80px">
    <div class="container">
        <h4>Logo</h4>
        <div class="container row spacebtw marginTop20px" id="contacts">
            <div class= "container contactsCard row">
                <img src="static/images/phone.png" height="50px">
                <div class="contactsCardData">
                    <h5>–¢–µ–ª–µ—Ñ–æ–Ω</h5>
                    <h5>293-86-16</h5>
                </div>
            </div>
            <div class= "container contactsCard row">
                <img src="static/images/mail.png" height="50px">
                <div class="contactsCardData">
                    <h5>Mail</h5>
                    <h5>medassistant@gmail.com</h5>
                </div>
            </div>
            <div class= "container contactsCard row">
                <img src="static/images/location.png" height="50px">
                <div class="contactsCardData">
                    <h5>–ê–¥—Ä–µ—Å</h5>
                    <h5>–≥. –ú–∏–Ω—Å–∫, —É–ª. –ü–ª–∞—Ç–æ–Ω–æ–≤–∞, 39</h5>
                </div>
            </div>
            <div class= "container contactsCard row">
                <img src="static/images/fax.png" height="50px">
                <div class="contactsCardData">
                    <h5>–§–∞–∫—Å</h5>
                    <h5>+1-000-0000</h5>
                </div>
            </div>
        </div>
    </div>

    <div class="container row spacebtw marginTop40px" id="footerItems">

        <div class="container footerItem">
            <h4>–£—Å–ª—É–≥–∏</h4>
            <div class="container footerItemData">
                <a href="#" class="thin">–û–Ω–ª–∞–π–Ω —á–∞—Ç</a>
                <a href="#" class="thin">–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</a>
                <a href="#" class="thin">–ó–∞–ø–∏—Å–∏</a>
                <a href="/medical_card" class="thin">–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è –∫–∞—Ä—Ç–∞</a>
            </div>
        </div>

        <div class="container footerItem">
            <h4>–ö–æ–ª–ª-—Ü–µ–Ω—Ç—Ä</h4>
            <h5>–ø–Ω-–ø—Ç 8:00-22:00</h5>
            <h5>—Å–±-–≤—Å 9:00-20:00</h5>
            <a href="tel:29-321-68-71"  class="thin">a1: 29-321-68-71</a>
            <a href="tel:33-321-68-71"  class="thin">life: 33-321-68-71</a>
            <a href="tel:25-321-68-71"  class="thin">mts: 25-321-68-71</a>
        </div>

        <div class="container footerItem ">
            <h4>–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h4>
            <div class="container footerItemData">
                <a href="tel:321-68-71"  class="thin">—Ç–µ–ª: 321-68-71</a>
                <a href="#"  class="thin">email: medassistant@offers.com</a>
            </div>
        </div>
    </div>

    <div class="create-line marginTop80px"></div>
    <div class="container row spacebtw marginTop10px" style="margin-bottom: 30px;">
        <div class="container row">
            <!-- <a href="#" class="marginW30px">–£—Å–ª—É–≥–∏</a>
            <a href="#" class="marginW30px">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã</a>
            <a href="#" class="marginW30px">–û –Ω–∞—Å</a>
            <a href="#" class="marginW30px">–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</a> -->
        </div>
        <div class="small"><h5 style="color: gray;">¬© 2024, –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã</h5></div>
    </div>
</footer>
{% endblock %}
    